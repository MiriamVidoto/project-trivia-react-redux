(this["webpackJsonptrivia-react-redux"]=this["webpackJsonptrivia-react-redux"]||[]).push([[0],{26:function(e,t,a){e.exports=a.p+"static/media/trivia.466d153e.png"},31:function(e,t,a){e.exports=a(52)},39:function(e,t,a){},41:function(e,t){},42:function(e,t,a){},43:function(e,t,a){},45:function(e,t,a){},51:function(e,t,a){},52:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),s=a.n(c),i=a(11),o=a(19),l=a(2),u=a(26),d=a.n(u),m=(a(39),a(7)),p=a(8),b=a(10),f=a(9),h=a(27),v=a.n(h),y=(a(42),function(e){Object(b.a)(a,e);var t=Object(f.a)(a);function a(){var e;Object(m.a)(this,a);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(e=t.call.apply(t,[this].concat(r))).getGravatarEmail=function(e){return v()(e).toString()},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.name,a=e.score,n=e.email;return r.a.createElement("div",{className:"header"},r.a.createElement("img",{"data-testid":"header-profile-picture",src:"https://www.gravatar.com/avatar/".concat(this.getGravatarEmail(n)),alt:"gravatar de ".concat(n)}),r.a.createElement("span",{"data-testid":"header-player-name"},t),r.a.createElement("span",{"data-testid":"header-score"},a))}}]),a}(n.Component)),g=Object(i.b)((function(e){return{name:e.player.name,score:e.player.score,email:e.player.gravatarEmail}}))(y),E=(a(43),function(e){Object(b.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props,t=e.assertions,a=e.score,n=e.history,c=t<3?"Could be better...":"Well Done!";return r.a.createElement("div",null,r.a.createElement(g,null),r.a.createElement("div",{className:"feedback"},r.a.createElement("h3",{"data-testid":"feedback-text"},c),r.a.createElement("p",{"data-testid":"feedback-total-score"},"Score: ".concat(a)),r.a.createElement("p",{"data-testid":"feedback-total-question"},"Hits: ".concat(t)),r.a.createElement("button",{type:"button","data-testid":"btn-play-again",onClick:function(){return n.push("/game")}},"Play Again"),r.a.createElement("button",{type:"button","data-testid":"btn-ranking",onClick:function(){return n.push("/ranking")}},"Ranking")))}}]),a}(r.a.Component)),k=Object(i.b)((function(e){return{assertions:e.player.assertions,score:e.player.score}}))(E),j=a(12),O=a.n(j),w=a(15),C=function(e){return{type:"GETAPI",payload:e}};a(45);var S=function(e){Object(b.a)(a,e);var t=Object(f.a)(a);function a(e){var n;return Object(m.a)(this,a),(n=t.call(this,e)).fetchQuestions=Object(w.a)(O.a.mark((function e(){var t,a,r;return O.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if((t=localStorage.getItem("token"))||n.setState({redirect:!0}),!t){e.next=10;break}return e.next=5,fetch("https://opentdb.com/api.php?amount=5&token=".concat(t));case 5:return a=e.sent,e.next=8,a.json();case 8:r=e.sent,n.setState({questions:r.results,redirect:r.response_code===n.responseNumber,loading:!1},(function(){var e=n.state,t=e.questions,a=e.questionIndex;if(e.redirect)localStorage.removeItem("token");else{n.getArrayAnwers();var r=t[a].difficulty;n.setState({dificult:r})}}));case 10:case"end":return e.stop()}}),e)}))),n.getArrayAnwers=function(){var e=n.state,t=e.questions,a=e.questionIndex,r=t[a].incorrect_answers.map((function(e,t){return{id:t,answer:e}}));r.push({id:4,answer:t[a].correct_answer}),r.sort((function(){return Math.random()-.5})),n.setState({answers:r})},n.tick=function(){n.state.seconds===n.time_limit?n.setState({btnsDisable:!0,seconds:0}):n.setState((function(e){return{seconds:e.seconds-1}}))},n.testDificult=function(){var e=n.state.dificult;return"hard"===e?3:"medium"===e?2:"easy"===e?1:void 0},n.scoreSum=function(){var e=n.state,t=e.restTime;return e.dificult?10+t*n.testDificult():0},n.handleClick=function(e){var t=e.target,a=n.state,r=a.questions,c=a.questionIndex;if(n.setState((function(e){return{correct:"greenCorrect",incorrect:"redIncorrect",btnClicked:!0,seconds:e.seconds,restTime:e.seconds}})),r[c].correct_answer===t.innerText){n.setState({dificult:r[c].difficulty});var s=n.props,i=s.assertionsget,o=s.assertions,l=s.scoreget,u=s.score;i(o+1),l(u+n.scoreSum()),clearInterval(n.timer)}clearInterval(n.timer)},n.nextQuestion=function(){var e=n.state.questionIndex;4===e?n.props.history.push("/feedback"):(n.setState({questionIndex:e+1,correct:"",incorrect:"",btnsDisable:!1,btnClicked:!1,seconds:30},(function(){return n.getArrayAnwers()})),setInterval((function(){return n.tick()}),n.milliseconds))},n.state={loading:!0,redirect:!1,questions:[],answers:[],questionIndex:0,correct:"",incorrect:"",dificult:"",seconds:30,restTime:0,btnClicked:!1,btnsDisable:!1},n.responseNumber=3,n.time_limit=0,n.milliseconds=1e3,n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=this;this.fetchQuestions(),this.timer=setInterval((function(){return e.tick()}),this.milliseconds)}},{key:"componentDidUpdate",value:function(e,t){var a=this.state.btnsDisable;(t.seconds===this.time_limit||a)&&clearInterval(this.timer)}},{key:"componentWillUnmount",value:function(){clearInterval(this.timer)}},{key:"render",value:function(){var e=this,t=this.state,a=t.questions,n=t.questionIndex,c=t.answers,s=t.redirect,i=t.loading,o=t.correct,u=t.incorrect,d=t.btnClicked,m=t.btnsDisable,p=t.seconds,b=a[n];return i?r.a.createElement("p",null,"Carregando..."):s?r.a.createElement(l.a,{to:"/project-trivia-react-redux"}):r.a.createElement("div",{className:"game"},r.a.createElement(g,null),r.a.createElement("div",{className:"question"},r.a.createElement("h3",{"data-testid":"question-category"},"Category: ".concat(b.category)),r.a.createElement("h5",{"data-testid":"question-text"},b.question),r.a.createElement("div",{"data-testid":"answer-options",className:"answers"},c.map((function(t,a){return 4===t.id?r.a.createElement("button",{key:a,type:"button","data-testid":"correct-answer",className:o,onClick:e.handleClick,disabled:m},t.answer):r.a.createElement("button",{key:a,type:"button","data-testid":"wrong-answer-".concat(a),className:u,onClick:e.handleClick,disabled:m},t.answer)})))),r.a.createElement("div",{className:"timer"},r.a.createElement("span",null,"Voc\xea tem ".concat(p," segundos para responder!")),r.a.createElement("div",{className:"next"},d&&r.a.createElement("button",{type:"button","data-testid":"btn-next",onClick:this.nextQuestion},"Next"))))}}]),a}(r.a.Component),x=Object(i.b)((function(e){return{score:e.player.score,assertions:e.player.assertions}}),(function(e){return{scoreget:function(t){return e(function(e){return{type:"GET_SCORE",payload:e}}(t))},assertionsget:function(t){return e(function(e){return{type:"GET_ASSERTIONS",payload:e}}(t))}}}))(S),I=a(20),A=(a(51),function(e){Object(b.a)(a,e);var t=Object(f.a)(a);function a(){var e;return Object(m.a)(this,a),(e=t.call(this)).handleChange=function(t){var a=t.target,n=a.name,r=a.value;e.setState(Object(I.a)({},n,r),(function(){return e.validateButton()}))},e.validateButton=function(){var t=e.state,a=t.email,n=t.name,r=/\S+@\S+\.\S+/.test(a);n.length>3&&r&&e.setState({disabled:!1})},e.handleClick=Object(w.a)(O.a.mark((function t(){var a,n,r,c,s;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.props,n=a.fetchAPI,r=a.history,c=a.addUser,t.next=3,n();case 3:s=e.props.token,localStorage.setItem("token",s),c(e.state),r.push("/game");case 7:case"end":return t.stop()}}),t)}))),e.state={email:"",name:"",disabled:!0},e}return Object(p.a)(a,[{key:"render",value:function(){var e=this.state,t=e.name,a=e.email,n=e.disabled,c=this.props.history;return r.a.createElement("div",{className:"login"},r.a.createElement("input",{"data-testid":"input-player-name",type:"text",name:"name",value:t,onChange:this.handleChange,placeholder:"Nome"}),r.a.createElement("input",{"data-testid":"input-gravatar-email",type:"email",name:"email",value:a,onChange:this.handleChange,placeholder:"Email"}),r.a.createElement("button",{type:"button","data-testid":"btn-play",disabled:n,onClick:this.handleClick},"Play"),r.a.createElement("button",{type:"submit","data-testid":"btn-settings",onClick:function(){return c.push("/settings")}},"Configura\xe7\xf5es"))}}]),a}(r.a.Component)),q=Object(i.b)((function(e){return{token:e.player.token}}),(function(e){return{fetchAPI:function(t){return e(function(e){return function(){var t=Object(w.a)(O.a.mark((function t(a){var n,r,c;return O.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://opentdb.com/api_token.php?command=request");case 3:return n=t.sent,t.next=6,n.json();case 6:return r=t.sent,e=r.token,c=a(C(e)),t.abrupt("return",c);case 12:t.prev=12,t.t0=t.catch(0),console.error(t.t0);case 15:case"end":return t.stop()}}),t,null,[[0,12]])})));return function(e){return t.apply(this,arguments)}}()}(t))},addUser:function(t){return e(function(e){return{type:"ADD_USER",payload:e}}(t))}}}))(A),N=function(e){Object(b.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){var e=this.props.history,t=localStorage.getItem("ranking");return r.a.createElement("div",null,r.a.createElement("h1",{"data-testid":"ranking-title"},"Ranking"),r.a.createElement("button",{type:"button","data-testid":"btn-go-home",onClick:function(){return e.push("/")}},"Home"),t&&r.a.createElement("div",null,t.map((function(e,t){return r.a.createElement("div",{key:t},r.a.createElement("img",{src:" ",alt:"",name:"img-gravatar"}),r.a.createElement("span",{"data-testid":"player-name-".concat(t)},e.name),r.a.createElement("span",{"data-testid":"player-score-".concat(t)},e.score))}))))}}]),a}(n.Component),D=function(e){Object(b.a)(a,e);var t=Object(f.a)(a);function a(){return Object(m.a)(this,a),t.apply(this,arguments)}return Object(p.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{"data-testid":"settings-title"},"Settings")}}]),a}(r.a.Component);function _(){return r.a.createElement("div",{className:"App"},r.a.createElement("header",{className:"App-header"},r.a.createElement("img",{src:d.a,className:"App-logo",alt:"logo"}),r.a.createElement("p",null,"SUA VEZ DE BRILHAR")),r.a.createElement(l.b,{exact:!0,path:"/project-trivia-react-redux",component:q}),r.a.createElement(l.b,{path:"/game",component:x}),r.a.createElement(l.b,{path:"/settings",component:D}),r.a.createElement(l.b,{path:"/feedback",component:k}),r.a.createElement(l.b,{path:"/ranking",component:N}))}var T=a(16),R=a(29),G=a(30),U=a(13),P={token:"",name:"",gravatarEmail:"",score:0,assertions:0},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"GETAPI":return Object(U.a)(Object(U.a)({},e),{},{token:t.payload});case"ADD_USER":return Object(U.a)(Object(U.a)({},e),{},{name:t.payload.name,gravatarEmail:t.payload.email});case"GET_SCORE":return Object(U.a)(Object(U.a)({},e),{},{score:t.payload});case"GET_ASSERTIONS":return Object(U.a)(Object(U.a)({},e),{},{assertions:t.payload});default:return e}},Q=Object(T.combineReducers)({player:B}),H=Object(T.createStore)(Q,Object(R.composeWithDevTools)(Object(T.applyMiddleware)(G.a)));window.Cypress&&(window.store=H);var M=H;s.a.render(r.a.createElement(i.a,{store:M},r.a.createElement(o.a,null,r.a.createElement(_,null))),document.getElementById("root"))}},[[31,1,2]]]);
//# sourceMappingURL=main.93d1c00c.chunk.js.map